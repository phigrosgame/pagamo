import tkinter as tk
import pyautogui
import json
import os

# æª”æ¡ˆå„²å­˜ä½ç½®
SAVE_FILE = 'coordinates.json'

# è¼‰å…¥èˆŠè³‡æ–™
if os.path.exists(SAVE_FILE):
    with open(SAVE_FILE, 'r') as f:
        coordinates = json.load(f)
else:
    coordinates = {}

def record_position(option):
    def record():
        print(f"ğŸ‘‰ è«‹åœ¨ 3 ç§’å…§æŠŠæ»‘é¼ ç§»åˆ°ã€{option}ã€‘çš„ä½ç½®...")
        root.after(3000, lambda: save_position(option))
    return record

def save_position(option):
    x, y = pyautogui.position()
    coordinates[option] = (x, y)
    print(f"âœ… å·²å„²å­˜ã€{option}ã€‘ï¼š({x}, {y})")
    update_display()
    save_to_file()

def update_display():
    result_var.set("\n".join(f"{k}: {v}" for k, v in coordinates.items()))

def save_to_file():
    with open(SAVE_FILE, 'w') as f:
        json.dump(coordinates, f)

# GUI
root = tk.Tk()
root.title("è¨­å®šç­”é¡Œåº§æ¨™")
root.geometry("320x300")

tk.Label(root, text="é»é¸æŒ‰éˆ•ï¼Œåœ¨ 3 ç§’å…§æŠŠæ»‘é¼ ç§»åˆ°å°æ‡‰ä½ç½®").pack(pady=10)

tk.Button(root, text="è¨­å®š A", width=20, command=record_position('A')).pack(pady=5)
tk.Button(root, text="è¨­å®š B", width=20, command=record_position('B')).pack(pady=5)
tk.Button(root, text="è¨­å®š C", width=20, command=record_position('C')).pack(pady=5)
tk.Button(root, text="è¨­å®š ä¸‹ä¸€é¡Œ", width=20, command=record_position('next')).pack(pady=5)

result_var = tk.StringVar()
tk.Label(root, text="ç›®å‰åº§æ¨™ï¼š").pack(pady=(10, 0))
tk.Label(root, textvariable=result_var).pack()

update_display()
root.mainloop()
